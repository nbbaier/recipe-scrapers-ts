name: CI Pipeline

on:
   pull_request:
   push:
      branches:
         - main

jobs:
   type-check:
      name: type-check
      runs-on: ubuntu-latest
      steps:
         - name: Checkout
           uses: actions/checkout@v4

         - name: Setup Bun
           uses: oven-sh/setup-bun@v2
           with:
              bun-version: latest

         - name: Install dependencies
           run: bun install --frozen-lockfile

         - name: Type check
           run: bun run type-check

   lint:
      name: lint
      runs-on: ubuntu-latest
      steps:
         - name: Checkout
           uses: actions/checkout@v4

         - name: Setup Bun
           uses: oven-sh/setup-bun@v2
           with:
              bun-version: latest

         - name: Install dependencies
           run: bun install --frozen-lockfile

         - name: Lint
           run: bun run lint

   test:
      name: test
      runs-on: ubuntu-latest
      steps:
         - name: Checkout
           uses: actions/checkout@v4

         - name: Setup Bun
           uses: oven-sh/setup-bun@v2
           with:
              bun-version: latest

         - name: Install dependencies
           run: bun install --frozen-lockfile

         - name: Test
           run: bun test
